const KHPGen={aniSpeed:"fast",minus_icon:"➖",randomString(length=20){let result="",characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",charactersLength=characters.length;for(let i=0;i<length;i++)result+=characters.charAt(Math.floor(Math.random()*charactersLength));return"_"+result+btoa((new Date).getTime()).replace(/=/g,"")},aniReplaceHTML(selector,content,duration){$(selector).fadeOut(duration,()=>$(selector).html(content).fadeIn(duration))},aniAppendTo(takeThis,appendHere,aniSpeed=KHPGen.aniSpeed){$(takeThis).css({display:"none"}).appendTo(appendHere).slideDown(aniSpeed)},ADD_EPISODE(elem){$(elem).parent(".addRemoveEpBtn").parent(".episode_container").after($("#phantomZoneCtn .episode_container").clone().hide()).next().slideDown(KHPGen.aniSpeed)},REMOVE_EPISODE(elem){let a=$(elem.parentNode.parentNode);a.slideUp(KHPGen.aniSpeed,()=>a.remove())},ADD_SOURCE(elem){KHPGen.aniAppendTo($("#temp_zone .singleSrcCtn").clone(),elem.parentNode.parentNode,KHPGen.aniSpeed)},REMOVE_SOURCE(elem){let a=$(elem.parentNode);a.slideUp(KHPGen.aniSpeed,()=>a.remove())},ADD_CAPTIONS(elem){KHPGen.aniAppendTo($("#temp_zone .singleCapCtn").clone(),$(elem.parentNode.parentNode),KHPGen.aniSpeed)},REMOVE_CAPTIONS(elem){$(elem.parentNode).slideUp(KHPGen.aniSpeed,()=>$(elem.parentNode).remove())},SELECT_TYPE(elem){let a=$(elem).parent(".dropdown-menu").parent("#typeSelectorContainer").find("#typeSelectorBtn"),b=$(elem).html();KHPGen.aniReplaceHTML(a,b,KHPGen.aniSpeed),a.attr("selected-type",$(elem).attr("type-data"))},SELECT_RES(elem){let a=$(elem).parent(".dropdown-menu").parent("#qualitySelectorContainer").find("#qualitySelectorBtn"),b=$(elem).html();KHPGen.aniReplaceHTML(a,b,KHPGen.aniSpeed),a.attr("selected-res",$(elem).attr("res-data"))},saveAsJSON(string){let filename=UNIQUE_ID,blob=new Blob([string],{type:"application/json"});saveAs(blob,filename)},downloadData(){saveAsJSON(generateCodeFromUserInput())},completeResult(elem){$("#masterPosterContainer, .episode_container").slideUp(KHPGen.aniSpeed),$("#addOrCreateNewCtn").slideDown(KHPGen.aniSpeed),elem.querySelectorAll("i-18n")[0].setAttribute("hidden",""),elem.querySelectorAll("i-18n")[1].removeAttribute("hidden"),$(elem).attr("onclick","KHPGen.editResult(this)")},editResult(elem){$("#addOrCreateNewCtn, #createNewPPCtn, #existedPPCtn").slideUp(KHPGen.aniSpeed),$("#masterPosterContainer, .episode_container").slideDown(KHPGen.aniSpeed),elem.querySelectorAll("i-18n")[0].removeAttribute("hidden"),elem.querySelectorAll("i-18n")[1].setAttribute("hidden",""),$(elem).attr("onclick","KHPGen.completeResult(this)")},generateCodeFromUserInput(addPosterAndPlayingIndicator=!0){$("#outputPanel").slideUp(KHPGen.aniSpeed);let RAW_DATA=[];for(let value of document.querySelectorAll("#userInteractCtn .episode_container"))if(value.querySelector(".title").value){let processingEpElem={type:"video"};processingEpElem.title=value.querySelector(".title").value,processingEpElem.sources=[];let preThumbSrc=value.querySelector(".previewThumbnail").value;preThumbSrc&&(processingEpElem.previewThumbnails={src:preThumbSrc});for(let source of value.querySelectorAll("#ALL_SRCS_CTN .singleSrcCtn")){let currentMediaSrc={};currentMediaSrc.src=source.querySelector(".mediaSrc").value,currentMediaSrc.type=source.querySelector("#typeSelectorBtn").getAttribute("selected-type"),currentMediaSrc.size=parseInt(source.querySelector("#qualitySelectorBtn").getAttribute("selected-res")),processingEpElem.sources.push(currentMediaSrc)}for(let caption of value.querySelectorAll("#ALL_CAPS_CTN .singleCapCtn"))if(caption.querySelector(".captionFullName").value){let processingCaption={kind:"subtitles"};processingCaption.label=caption.querySelector(".captionFullName").value,processingCaption.srclang=caption.querySelector(".captionShortName").value,processingCaption.src=caption.querySelector(".capionSrc").value,processingEpElem.tracks.push(processingCaption)}RAW_DATA.push(processingEpElem)}return addPosterAndPlayingIndicator&&(RAW_DATA.push($("#masterPosterInput").val()||""),RAW_DATA.push(UNIQUE_ID)),JSON.stringify(RAW_DATA)},copy2clip:new ClipboardJS(".copy2clip"),messageBox(message="Thông báo!",duration=1e3){let tempID=KHPGen.randomString();void 0===$(".alertCtn")[0]&&$("body").append('<div class="alertCtn"><div class="innerAlertCtn"></div></div>'),$(".innerAlertCtn").append(`<div class="alert" id="${tempID}" role="alert" display="none">${message}</div>`),$("#"+tempID).slideDown("normal"),setTimeout(()=>{$("#"+tempID).slideUp("normal",()=>$("#"+tempID).remove())},duration)}};var UNIQUE_ID="khplayer"+KHPGen.randomString();$("#qualitySelectorContainer .dropdown-item").attr("onclick","KHPGen.SELECT_RES(this)"),$("#typeSelectorContainer .dropdown-item").attr("onclick","KHPGen.SELECT_TYPE(this)"),$("#phantomZoneCtn .episode_container").clone().appendTo("#userInteractCtn").show(),$("#phantomZoneCtn #ALL_SRCS_CTN .singleSrcCtn").clone().appendTo("#phantomZoneCtn #temp_zone"),$("#temp_zone #addSourceBtn").attr("onclick","KHPGen.REMOVE_SOURCE(this)").removeAttr("id").html(KHPGen.minus_icon),$("#phantomZoneCtn #ALL_CAPS_CTN .singleCapCtn").clone().appendTo("#phantomZoneCtn #temp_zone"),$("#temp_zone #addCaptionBtn").attr("onclick","KHPGen.REMOVE_CAPTIONS(this)").removeAttr("id").html(KHPGen.minus_icon),$("#phantomZoneCtn #addEpBtn").clone().appendTo("#phantomZoneCtn .addRemoveEpBtn"),$("#phantomZoneCtn #addEpBtn:nth-child(2)").removeAttr("id").attr("onclick","KHPGen.REMOVE_EPISODE(this)").html(KHPGen.minus_icon),$(".editResult").hide(),$("#downloadJSON").on("click",()=>KHPGen.saveAsJSON(KHPGen.generateCodeFromUserInput())),$("#createNewPPActionBtn").on("click",()=>{$("#createNewPPCode>code").html(`&#x3C;khplayer-container data=&#x22;${UNIQUE_ID}.json&#x22;&#x3E;&#x3C;/khplayer-container&#x3E;`),$("#existedPPCtn").slideUp(KHPGen.aniSpeed),$("#createNewPPCtn").slideDown(KHPGen.aniSpeed)}),$("#existedPPActionBtn").on("click",()=>{let newData=KHPGen.generateCodeFromUserInput(!1);newData=newData.slice(1,newData.length-3),$("#existedPPCtnCode>code").html(newData),$("#createNewPPCtn").slideUp(KHPGen.aniSpeed),$("#existedPPCtn").slideDown(KHPGen.aniSpeed)}),KHPGen.copy2clip.on("success",e=>{e.clearSelection(),KHPGen.messageBox("Đã copy vào clipboard!")}),document.addEventListener("DOMContentLoaded",()=>{if("en"==new URLSearchParams(window.location.search).get("lang")){for(let elem of document.querySelectorAll("i-18n"))elem.innerHTML=elem.getAttribute("en");for(let elem of document.querySelectorAll("*[ph-en]"))elem.setAttribute("placeholder",elem.getAttribute("ph-en"))}else{for(let elem of document.querySelectorAll("i-18n"))elem.innerHTML=elem.getAttribute("vi");for(let elem of document.querySelectorAll("*[ph-vi]"))elem.setAttribute("placeholder",elem.getAttribute("ph-vi"))}});
//# sourceMappingURL=vendor.min.js.map
